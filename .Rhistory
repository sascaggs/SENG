# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group)
full + sub + plot_layout(widths = c(2,4))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none')
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group)
full + sub + plot_layout(widths = c(2,5))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none')
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group)
full + sub + plot_layout(widths = c(2,5))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none') +
ggtitle("Full network")
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group) +
ggtitle("Sub groups")
full + sub + plot_layout(widths = c(2,5))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph('kk') +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none') +
ggtitle("Full network")
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph('kk') +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group) +
ggtitle("Sub groups")
full + sub + plot_layout(widths = c(2,5))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none') +
ggtitle("Full network")
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group) +
ggtitle("Sub groups")
full + sub + plot_layout(widths = c(2,5))
# full network
full = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
theme(legend.position = 'none') +
ggtitle("Full network")
# sub graphs
sub = sim_g %>%
as_tbl_graph %>%
ggraph() +
theme_graph() +
geom_edge_link() +
geom_node_point( aes(color=group) ) +
facet_nodes(~group) +
ggtitle("Network subgroups")
full + sub + plot_layout(widths = c(2,5))
# load package
library(tidyverse)
library(statnet)
library(igraph)
library(tidygraph)
library(ggraph)
library(patchwork)
ptheme = theme( panel.background = element_rect(color='black', fill='white'),
panel.grid = element_blank(),
strip.background = element_rect(color=NA,fill='white'),
axis.ticks.length = unit(2, 'mm'))
# seed for reproducibility
set.seed(777)
# how many nodes? how many groups?
N = 60
groups = c('G1','G2','G3')
# initialize empty network
empty_g = network( N, directed = TRUE, density = 0 )
# create group attribute
empty_g %v% 'group' = sample( groups, size = N, replace = TRUE )
# set parameters for edge density (edges) and homophily (nodematch) and reciprocity (mutual)
# remember these are in log-odds where 0 = 50/50
pars = c(-4,1,2)
# simulate
sim_g = simulate( empty_g ~ edges + nodematch('group') + mutual, coef = pars )
plot(sim_g)
sim_g %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to])
sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to])
sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to],
group_match = group_from == group_to)
group_match = ifelse( group_from == 'G1' & group_to == 'G1', 'G1', 0  )
sim_g %>%
()
sim_g %>%
()
sim_g %>%
as_tbl_graph()
sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to],
group_match = ifelse( group_from == 'G1' & group_to == 'G1', 'G1', 0  ) )
sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to],
group_match = ifelse( group_from == 'G1' & group_to == 'G1', 'G1',
ifelse(group_from == 'G2' & group_to == 'G2', 'G2',
ifelse( group_from == 'G3' & group_to == 'G3', 'G3', 'No match'))) )
sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to],
group_match = ifelse( group_from == 'G1' & group_to == 'G1', 'G1',
ifelse(group_from == 'G2' & group_to == 'G2', 'G2',
ifelse( group_from == 'G3' & group_to == 'G3', 'G3', 'No match'))) )
warnings()
sim_g = sim_g %>%
as_tbl_graph() %>%
activate(edges) %>%
mutate(group_from = .N()$group[from],
group_to = .N()$group[to],
group_match = ifelse( group_from == 'G1' & group_to == 'G1', 'G1',
ifelse(group_from == 'G2' & group_to == 'G2', 'G2',
ifelse( group_from == 'G3' & group_to == 'G3', 'G3', 'No match'))) )
sim_g
sim_g %>%
ggraph()
sim_g %>%
ggraph() +
theme_graph()
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), guide = NA )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), guide = 'none' )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), guide = NULL )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=grouo) )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group) )
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group) ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'))
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group) ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), width=2 ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','grey','grey','grey'), guide = NULL) +
scale_color_manual(values = c('#ad003f','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#aaaaaa33','grey','grey'), guide = NULL) +
scale_color_manual(values = c('#ad003f','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc33','#cccccc33','#cccccc33'), guide = NULL) +
scale_color_manual(values = c('#ad003f','grey','grey'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc55','#cccccc55','#cccccc55'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc55','#cccccc55'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=3 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL)
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL)
sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL)
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=1.2 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=0.77 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=0.77 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match), width=0.77 ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
g1 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#ad003f','#cccccc77','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#ad003f','#cccccc77','#cccccc77'), guide = NULL) +
ggtitle('Group 1')
g2 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#d2a52e','#cccccc77','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#d2a52e','#cccccc77'), guide = NULL) +
ggtitle('Group 2')
g3 = sim_g %>%
ggraph() +
theme_graph() +
geom_edge_link( aes(color=group_match) ) +
geom_node_point( aes( color=group), size=2 ) +
scale_edge_color_manual( values = c('#cccccc77','#cccccc77','#00c994','#cccccc77'), guide = NULL) +
scale_color_manual(values = c('#cccccc77','#cccccc77','#00c994'), guide = NULL) +
ggtitle('Group 3')
g1 + g2 + g3
lo = plot(sim_g)
lo = plot(sim_g, layout = layout_with_fr())
# same layout fr
lo = plot( sim_g, layout = layout_with_fr )
sim_g %>%
ggraph()
sim_g %>%
ggraph(layout = lo)
# same layout fr
lo = layout_with_fr(sim_g)
sim_g %>%
ggraph(layout = lo)
plot(sim_g, layout = lo)
# same layout fr
lo = layout_with_fr(sim_g)
plot(sim_g, layout = lo)
sim_g %>%
ggraph(layout = lo) %>%
geom_edge_link() +
geom_node_point()
sim_g %>%
ggraph(layout = lo) +
geom_edge_link() +
geom_node_point()
# same layout fr
lo = layout_with_fr(sim_g)
plot(sim_g, layout = lo)
sim_g %>%
ggraph(layout = lo) +
geom_edge_link() +
geom_node_point()
# same layout fr
lo = layout_with_fr(sim_g)
plot(sim_g, layout = lo)
# use lo in ggraph
sim_g %>%
ggraph(layout = lo) +
geom_edge_link() +
geom_node_point()
blogdown::serve_site()
